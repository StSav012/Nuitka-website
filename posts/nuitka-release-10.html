<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/">
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nuitka Release 1.0 &#8212; Nuitka the Python Compiler  documentation</title>
      <link rel="stylesheet" href="/_static/css/combined_e6840a1efaf0bb3afd9a2fd6b30cc2e9.css" type="text/css">
      <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-10.html">
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script>var DOCUMENTATION_OPTIONS = {
    URL_ROOT: '../',
    VERSION: '',
    LANGUAGE: 'en',
    COLLAPSE_INDEX: false,
    BUILDER: 'html',
    FILE_SUFFIX: '.html',
    LINK_SUFFIX: '.html',
    HAS_SOURCE: false,
    SOURCELINK_SUFFIX: '.txt',
    NAVIGATION_WITH_KEYS: false,
    SHOW_SEARCH_SUMMARY: true,
    ENABLE_SEARCH_SHORTCUTS: true,
};</script>
        <script src="/_static/combined_1f3d291568f0d25fd5e0e83c3075a3a3.js" async=""></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js" async=""></script>
        <script src="../_static/clipboard.min.js" async=""></script>
        <script src="../_static/copybutton.js" async=""></script>
        <link rel="index" title="Index" href="../genindex.html">
    <link rel="alternate" type="application/atom+xml" href="../blog/atom.xml" title="Nuitka Blog">
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <div class="logo_container"><img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo" width="208" height="209">
          </div></a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 1.1 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-1-0">Nuitka Release 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-9">Nuitka Release 0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-1-0">
<h1>Nuitka Release 1.0<a class="headerlink" href="#nuitka-release-1-0" title="Permalink to this heading">&#61633;</a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">&#8220;download now&#8221;</a>.</p>
<p>This release contains a large amount of new features, while
consolidating what we have with many bug fixes. Scalability should be
dramatically better, as well as new optimization that will accelerate
some code quite a bit. See the summary, how this release is paving the
way forward.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this heading">&#61633;</a></h2>
<ul>
<li><p>Python3: Fix, <code class="docutils literal notranslate"><span class="pre">bytes.decode</span></code> with only <code class="docutils literal notranslate"><span class="pre">errors</span></code> argument given
was not working. Fixed in 0.9.1 already.</p></li>
<li><p>MSYS2: Fix, the accelerate mode <code class="docutils literal notranslate"><span class="pre">.cmd</span></code> file was not working
correctly. Fixed in 0.9.1 already.</p></li>
<li><p>Onefile: Fix, the bootstrap when waiting for the child, didn&#8217;t
protect against signals that interrupt this call. This only affected
users of the non-public <code class="docutils literal notranslate"><span class="pre">--onefile-tempdir</span></code> option on Linux, but
with that becoming the default in 1.0, this was discovered. Fixed in
0.9.1 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> compile time generated <code class="docutils literal notranslate"><span class="pre">Distribution</span></code> values
could cause issues with code that put it into calls, or in tried
blocks. Fixed in 0.9.1 already.</p></li>
<li><p>Standalone: Added implicit dependencies of <code class="docutils literal notranslate"><span class="pre">Xlib</span></code> package. Fixed in
0.9.1 already.</p></li>
<li><p>macOS: Fix, the package configuration for <code class="docutils literal notranslate"><span class="pre">wx</span></code> had become invalid
when restructuring the Yaml with code and schema disagreeing on
allowed values. Fixed in 0.9.1 already.</p></li>
<li><p>Fix: The <code class="docutils literal notranslate"><span class="pre">str.format</span></code> with a single positional argument didn&#8217;t
generate proper code and failed to compile on the C level. Fixed in
0.9.1 already.</p></li>
<li><p>Fix, the type shape of <code class="docutils literal notranslate"><span class="pre">str.count</span></code> result was wrong. Fixed in 0.9.1
already.</p></li>
<li><p>UI: Fix, the warning about collision of just compiled package and
original package in the same folder hiding the compiled package
should not apply to packages without an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file, as
those do <strong>not</strong> take precedence. Fixed in 0.9.2 already.</p></li>
<li><p>Debugging: Fix, the fallback to <code class="docutils literal notranslate"><span class="pre">lldb</span></code> from <code class="docutils literal notranslate"><span class="pre">gdb</span></code> when using the
option <code class="docutils literal notranslate"><span class="pre">--debugger</span></code> was broken on anything but Windows. Fixed in
0.9.2 already.</p></li>
<li><p>Python3.8: The module <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> was not recognized
before 3.9, but actually 3.8 already has it, causing the compile time
resolution of package versions to not work there. Fixed in 0.9.3
already.</p></li>
<li><p>Standalone: Fix, at least on macOS we should also scan from parent
folders of DLLs, since they may contain sub-directories in their
names. This is mostly the case, when using frameworks. Fixed in 0.9.2
already.</p></li>
<li><p>Standalone: Added package configuration for <code class="docutils literal notranslate"><span class="pre">PyQt5</span></code> to require
onefile bundle mode on macOS, and recommend to disable console for
PyQt6. This is same as we already do for <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> and <code class="docutils literal notranslate"><span class="pre">PySide6</span></code>.
Fixed in 0.9.2 already.</p></li>
<li><p>Standalone: Removed stray macOS onefile bundle package configuration
for <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module which must have been added in error. Fixed in
0.9.2 already.</p></li>
<li><p>UI: Catch user error of attempting to compile the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>
rather than the package directory. Fixed in 0.9.2 already.</p></li>
<li><p>Fix, hard name import nodes failed to clone, causing issues in
optimization phase. Fixed in 0.9.2 already.</p></li>
<li><p>Fix, avoid warnings given with gcc 11. Fixed in 0.9.2 already.</p></li>
<li><p>Fix, dictionary nodes where the operation itself has no effect, e.g.
<code class="docutils literal notranslate"><span class="pre">dict.copy</span></code> were not properly annotating that their dictionary
argument could still cause a raise and have side effects, triggering
an assertion violation in Nuitka. Fixed in 0.9.2 already.</p></li>
<li><p>Standalone: Added <code class="docutils literal notranslate"><span class="pre">pynput</span></code> implicit dependencies on Linux. Fixed in
0.9.2 already.</p></li>
<li><p>Fix, boolean condition checks on variables converted immutable
constant value assignments to boolean values, leading to incorrect
code execution. Fixed in 0.9.2 already.</p></li>
<li><p>Python3.9: Fix, could crash on generic aliases with non-hashable
values. Fixed in 0.9.3 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">:</span><span class="nb">any</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Python3: Fix, an iteration over <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> was falsely
optimized into a tuple, which is not always compatible. Fixed in
0.9.3 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">xgboost</span></code> package. Fixed in 0.9.3
already.</p></li>
<li><p>Standalone: Added data file for <code class="docutils literal notranslate"><span class="pre">text_unidecode</span></code> package. Fixed in
0.9.4 already.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">swagger_ui_bundle</span></code> package. Fixed
in 0.9.4 already.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">connexion</span></code> package. Fixed in
0.9.4 already.</p></li>
<li><p>Standalone: Added implicit dependencies for <code class="docutils literal notranslate"><span class="pre">sklearn.utils</span></code> and
<code class="docutils literal notranslate"><span class="pre">rapidfuzz</span></code>. Fixed in 0.9.4 already.</p></li>
<li><p>Python3.10: Fix, the reformulation of <code class="docutils literal notranslate"><span class="pre">match</span></code> statements could
create nodes that are used twice, causing code generation to assert.
Fixed in 0.9.4 already.</p></li>
<li><p>Fix, module objects removed from <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> but still used could
lack a reference to themselves, and therefore crash due to working on
a released module variables dictionary. Fixed in 0.9.5 already.</p></li>
<li><p>Fix, the MSVC compiles code generated for SciPy 1.8 wrongly. Added a
workaround for that code to avoid triggering it. Fixed in 0.9.6
already.</p></li>
<li><p>Fix, calls to <code class="docutils literal notranslate"><span class="pre">str.format</span></code> where the result is not used, could
crash the compiler during code generation. Fixed in 0.9.6 already.</p></li>
<li><p>Standalone: For DLLs on macOS and Anaconda, also consider the <code class="docutils literal notranslate"><span class="pre">lib</span></code>
directory of the root environment, as some DLLs are otherwise not
found.</p></li>
<li><p>Fix, allow <code class="docutils literal notranslate"><span class="pre">nonlocal</span></code> and <code class="docutils literal notranslate"><span class="pre">global</span></code> for <code class="docutils literal notranslate"><span class="pre">__class__</span></code> to be used
on the class level.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">xrange</span></code> with large values didn&#8217;t work on all platforms. This
affected at least Python2 on macOS, but potentially others as well.</p></li>
<li><p>Windows: When scanning for installed Pythons to e.g. run Scons or
onefile compression, it was attempting to use installations that got
deleted manually and could crash.</p></li>
<li><p>macOS: Fix, DLL conflicts are now resolved by checking the version
information too, also all cases that previously errored out after a
conflict was reported, will now work.</p></li>
<li><p>Fix, conditional expressions whose statically decided condition
picking a branch will raise an exception could crash the compilation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Would previously crash Nuitka during optimization.</span>
<span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"nt"</span> <span class="k">else</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p>Windows: Make sure we set C level standard file handles too</p>
<p>At least newer subprocess was affected by this, being unable to
provide working handles to child processes that pass their current
handles through, and also this should help DLL code to use it as
level.</p>
</li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">pyqtgraph</span></code> data files.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">dipy</span></code> by anti-bloat removal of its
testing framework that wants to do unsupported stuff.</p></li>
<li><p>UI: Could still give warnings about modules not being followed, where
that was not true.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">--include-module</span></code> was not working for non-automatic standard
library paths.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this heading">&#61633;</a></h2>
<ul>
<li><p>Onefile: Recognize a non-changing path from
<code class="docutils literal notranslate"><span class="pre">--onefile-tempdir-spec</span></code> and then use cached mode. By default a
temporary folder is used in the spec value, make it delete the files
afterwards.</p>
<p>The cached mode is not necessarily faster, but it is not going to
change files already there, leaving the binaries there intact. In the
future it may also become faster to execute, but right now checking
the validity of the file takes about as long as re-creating it,
therefore no gain yet. The main point, is to not change where it runs
from.</p>
</li>
<li><p>Standalone: Added option to exclude DLLs. You can npw use
<code class="docutils literal notranslate"><span class="pre">--noinclude-dlls</span></code> to exclude DLLs by filename patterns.</p>
<p>The may e.g. come from Qt plugins, where you know, or experimented,
that it is not going to be used in your specific application. Use
with care, removing DLLs will lead to very hard to recognize errors.</p>
</li>
<li><p>Anaconda: Use <code class="docutils literal notranslate"><span class="pre">CondaCC</span></code> from environment variables for Linux and
macOS, in case it is installed. This can be done with e.g. <code class="docutils literal notranslate"><span class="pre">conda</span>
<span class="pre">install</span> <span class="pre">gcc-linux-64</span></code> on Linux or <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">clang_osx-64</span></code> on
macOS.</p></li>
<li><p>Added new option <code class="docutils literal notranslate"><span class="pre">--nowarn-mnemonic</span></code> to disable warnings that use
mnemonics, there is currently not that many yet, but it&#8217;s going to
expand. You can use this to acknowledge the ones you accept, and not
get that warning with the information pointer anymore.</p></li>
<li><p>Added method for resolving DLL conflicts on macOS too. This is using
version information and picks the newer one where possible.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--user-package-configuration-file</span></code> for user provided
Yaml files, which can be used to provide package configuration to
Nuitka, to e.g. add DLLs, data files, do some anti-bloat work, or add
missing dependencies locally. The documentation for this does not yet
exist though, but Nuitka contains a Yaml schema in the
<code class="docutils literal notranslate"><span class="pre">misc/nuitka-package-config-schema.json</span></code> file.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">nuitka-project-else</span></code> to avoid repeating conditions in Nuitka
project configuration, this can e.g. be used like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># nuitka-project-if: os.getenv("TEST_VARIANT", "pyside2") == "pyside2":</span>
<span class="c1">#   nuitka-project: --enable-plugin=no-qt</span>
<span class="c1"># nuitka-project-else:</span>
<span class="c1">#   nuitka-project: --enable-plugin=no-qt</span>
<span class="c1">#   nuitka-project: --noinclude-data-file=*.svg</span>
</pre></div>
</div>
<p>Previously, the inverted condition had to be used in another
<code class="docutils literal notranslate"><span class="pre">nuitka-project-if</span></code> which is no big deal, but less readable.</p>
</li>
<li><p>Added support for deep copying uncompiled functions. There is now a
section in the User Manual that explains how to clone compiled
functions. This allows a workaround like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">binder</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
   <span class="k">try</span><span class="p">:</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
   <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__code__</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__globals__</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">argdefs</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="vm">__defaults__</span><span class="p">,</span> <span class="n">closure</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="vm">__closure__</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">update_wrapper</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
      <span class="n">result</span><span class="o">.</span><span class="vm">__kwdefaults__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__kwdefaults__</span>

   <span class="n">result</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>
   <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</li>
<li><p>Plugins: Added explicit deprecation status of a plugin. We now have a
few that do nothing, and are just there for compatibility with
existing users, and this now informs the user properly rather than
just saying it is not relevant.</p></li>
<li><p>Fix, some Python installations crash when attempting to import
modules, such as <code class="docutils literal notranslate"><span class="pre">os</span></code> with a <code class="docutils literal notranslate"><span class="pre">ModuleName</span></code> object, because we
limit string operations done, and e.g. refuse to do <code class="docutils literal notranslate"><span class="pre">.startswith</span></code>
which of course, other loaders that your installation has added,
might still use.</p></li>
<li><p>Windows: In case of not found DLLs, we can still examine the run time
of the currently compiling Python process of Nuitka, and locate them
that way, which helps for some Python configurations to support
standalone, esp. to find CPython DLL in unusual spots.</p></li>
<li><p>Debian: Workaround for <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code> data files. These are from stdlib
and therefore the patched code from Debian needs to be undone, to
make these portable again.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this heading">&#61633;</a></h2>
<ul class="simple">
<li><p>Scalability: Avoid merge traces of initial variable versions, which
came into play when merging a variable used in only one branch. These
are useless and only made other optimization slower or impossible.</p></li>
<li><p>Scalability: Also avoid merge traces of merge traces, instead flatten
merge traces and avoid the duplication doing so. There were
pathological cases, where this reduced optimization time for
functions from infinite to instant.</p></li>
<li><p>For comparison helpers, switch comparison where possible, such that
there are only 3 variants, rather than 6. Instead the boolean result
is inverted, e.g. changing <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> into <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">&lt;</span></code> effectively. Of
course this can only be done for types, where we know that nothing
special, i.e. no method overloads of <code class="docutils literal notranslate"><span class="pre">__gte__</span></code> is going on.</p></li>
<li><p>For binary operations that are commutative with the selected types,
in mixed type cases, swap the arguments during code generation, such
that e.g. <code class="docutils literal notranslate"><span class="pre">long_a</span> <span class="pre">+</span> <span class="pre">float_b</span></code> is actually computed as <code class="docutils literal notranslate"><span class="pre">float_b</span> <span class="pre">+</span>
<span class="pre">long_a</span></code>. This again avoids many helpers. It also can be done for
<code class="docutils literal notranslate"><span class="pre">*</span></code> with integers and container types.</p></li>
<li><p>In cases, where a comparison (or one of the few binary operation
where we consider it useful), is used in a boolean context, but we
know it is impossible to raise an exception, a C boolean result type
is used rather than a <code class="docutils literal notranslate"><span class="pre">nuitka_bool</span></code> which is now only used when
necessary, because it can indicate the exception result.</p></li>
<li><p>Anti-Bloat: More anti-bloat work was done for popular packages,
covering also uses of <code class="docutils literal notranslate"><span class="pre">setuptools_scm</span></code>, <code class="docutils literal notranslate"><span class="pre">nose</span></code> and <code class="docutils literal notranslate"><span class="pre">nose2</span></code>
package removals and warnings. There was also a focus on making
<code class="docutils literal notranslate"><span class="pre">mmvc</span></code>, <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> and <code class="docutils literal notranslate"><span class="pre">tifffile</span></code> compile well, removing e.g.
the uses of the tensorflow testing framework.</p></li>
<li><p>Faster comparison of <code class="docutils literal notranslate"><span class="pre">int</span></code> values with constant values, this uses
helpers that work with C <code class="docutils literal notranslate"><span class="pre">long</span></code> values that represent a single
&#8220;digit&#8221; of a value, or ones that use the full value space of C
<code class="docutils literal notranslate"><span class="pre">long</span></code>.</p></li>
<li><p>Faster comparison of <code class="docutils literal notranslate"><span class="pre">float</span></code> values with constant values, this uses
helpers that work with C <code class="docutils literal notranslate"><span class="pre">float</span></code> values, avoiding the useless
Python level constant objects.</p></li>
<li><p>Python2: Comparison of <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> now has specialized
helpers that avoids converting the <code class="docutils literal notranslate"><span class="pre">int</span></code> to a <code class="docutils literal notranslate"><span class="pre">long</span></code> through
coercion. This takes advantage of code to compare C <code class="docutils literal notranslate"><span class="pre">long</span></code> values
(which are at the core of Python2 <code class="docutils literal notranslate"><span class="pre">int</span></code> objects, with <code class="docutils literal notranslate"><span class="pre">long</span></code>
objects.</p></li>
<li><p>For binary operation on mixed types, e.g. <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">bytes</span></code> the slot of
the first function was still considered, and called to give a
<code class="docutils literal notranslate"><span class="pre">Py_NotImplemented</span></code> return value for no good reason. This also
applies to mixed operations of <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, and <code class="docutils literal notranslate"><span class="pre">float</span></code>
types, and for <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">unicode</span></code> values on Python2.</p></li>
<li><p>Added missing helper for <code class="docutils literal notranslate"><span class="pre">**</span></code> operation with floats, this had been
overlooked so far.</p></li>
<li><p>Added dedicated nodes for <code class="docutils literal notranslate"><span class="pre">ctypes.CDLL</span></code> which aims to allow us to
detect used DLLs at compile time in the future, and to move closer to
support its bindings more efficiently.</p></li>
<li><p>Added specialized nodes for <code class="docutils literal notranslate"><span class="pre">dict.popitem</span></code> as well. With this, now
all of the dictionary methods are specialized.</p></li>
<li><p>Added specialized nodes for <code class="docutils literal notranslate"><span class="pre">str.expandtabs</span></code>, <code class="docutils literal notranslate"><span class="pre">str.translate</span></code>,
<code class="docutils literal notranslate"><span class="pre">str.ljust</span></code>, <code class="docutils literal notranslate"><span class="pre">str.rjust</span></code>, <code class="docutils literal notranslate"><span class="pre">str.center</span></code>, <code class="docutils literal notranslate"><span class="pre">str.zfill</span></code>, and
<code class="docutils literal notranslate"><span class="pre">str.splitlines</span></code>. While these are barely performance relevant, this
completes all <code class="docutils literal notranslate"><span class="pre">str</span></code> methods, except <code class="docutils literal notranslate"><span class="pre">removeprefix</span></code> and
<code class="docutils literal notranslate"><span class="pre">removesuffix</span></code> that are Python3.9 or higher.</p></li>
<li><p>Added type shape for result of <code class="docutils literal notranslate"><span class="pre">str.index</span></code> operation as well, this
was missing so far.</p></li>
<li><p>Optimize <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code> method calls through
variables.</p></li>
<li><p>Optimize calls through variables containing e.g. mutable constant
values, these will be rare, because they all become exceptions.</p></li>
<li><p>Optimize calls through variables containing built-in values,
unlocking optimization of such calls, where it is assigned to a local
variable.</p></li>
<li><p>For generated attribute nodes, avoid local doing import statements on
the function level. While these were easier to generate, they can
only be slow at runtime.</p></li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">str</span></code> built-in annotate its value as derived from <code class="docutils literal notranslate"><span class="pre">str</span></code>,
which unfortunately does not allow much optimization, since that can
still change many things, but it was still a missing attribute.</p></li>
<li><p>For variable value release nodes, specialize them by value type as
well, enhancing the scalability, because e.g. parameter variable
specific tests, need not be considered for all other variable types
as well.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this heading">&#61633;</a></h2>
<ul>
<li><p>Plugins: Major changes to the Yaml file content, cleaning up some of
the DLL configuration to more easy to use.</p>
<p>The DLL configuration has two flavors, one from code and one from
filename matching, and these got separated into distinct items in the
Yaml configuration. Also how source and dest paths get provided got
simplified, with a relative path now being used consistently and with
sane defaults, deriving the destination path from where the module
lives. Also what we called patterns, are actually prefixes, as there
is still the platform specific DLL file naming appended.</p>
</li>
<li><p>Plugins: Move mode checks to dedicated plugin called
<code class="docutils literal notranslate"><span class="pre">options-nanny</span></code> that is always enabled, giving also much cleaner
Yaml configuration with a new section added specifically for these.
It controls advice on the optional or required use of
<code class="docutils literal notranslate"><span class="pre">--disable-console</span></code> and the like. Some packages, e.g. <code class="docutils literal notranslate"><span class="pre">wx</span></code> are
known to crash on macOS when the console is enabled, so this advice
is now done with saner configuration.</p></li>
<li><p>Plugins: Also for all Yaml configuration sub-items where is now a
consistent <code class="docutils literal notranslate"><span class="pre">when</span></code> field, that allows checking Python version, OS,
Nuitka modes such as standalone, and only apply configuration when
matching this criterion, with that the anti-bloat options to allow
certain bloat, should now have proper effect as well.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">AppImage</span></code> on Linux is no more. The performance for
startup was always slower, while having lost the main benefit of
avoiding IO at startup, due to new cached mode, so now we always use
the same bootstrap binary as on macOS and Windows.</p></li>
<li><p>UI: Do not display implicit reports reported by plugins by default
anymore. These have become far too many, esp. with the recent stdlib
work, and often do not add any value. The compilation report will
become where to turn to find out why a module in included.</p></li>
<li><p>UI: Ask the user to install the ordered set package that will
actually work for the specific Python version, rather than making him
try one of two, where sometimes only one can work, esp. with Python
3.10 allowing only one.</p></li>
<li><p>GitHub: More clear wording in the issue template that <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span>
<span class="pre">nuitka</span> <span class="pre">--version</span></code> output is really required for support to given.</p></li>
<li><p>Attempt to use Anaconda <code class="docutils literal notranslate"><span class="pre">ccache</span></code> binary if installed on
non-Windows. This is esp. handy on macOS, where it is harder to get
it.</p></li>
<li><p>Windows: Avoid byte-compiling the inline copy of Scons that uses
Python3 when installing for Python2.</p></li>
<li><p>Added experimental switches to disable certain optimization in order
to try out their impact, e.g. on corruption bugs.</p></li>
<li><p>Reports: Added included DLLs for standalone mode to compilation
report.</p></li>
<li><p>Reports: Added control tags influencing plugin decisions to the
compilation report.</p></li>
<li><p>Plugins: Make the <code class="docutils literal notranslate"><span class="pre">implicit-imports</span></code> dependency section in the Yaml
package configuration a list, for consistency with other blocks.</p></li>
<li><p>Plugins: Added checking of tags such from the package configuration,
so that for things dependent on python version (e.g.
<code class="docutils literal notranslate"><span class="pre">python39_or_higher</span></code>, <code class="docutils literal notranslate"><span class="pre">before_python39</span></code>), the usage of Anaconda
(<code class="docutils literal notranslate"><span class="pre">anaconda</span></code>) or certain OS (e.g. <code class="docutils literal notranslate"><span class="pre">macos</span></code>), or modes (e.g.
<code class="docutils literal notranslate"><span class="pre">standalone</span></code>), expressions in <code class="docutils literal notranslate"><span class="pre">when</span></code> can limit a configuration
item.</p></li>
<li><p>Quality: Re-enabled string normalization from black, the issues with
changes that are breaking to Python2 have been worked around.</p></li>
<li><p>User Manual: Describe using a minimal virtualenv as a possible help
low memory situations as well.</p></li>
<li><p>Quality: The yaml auto-format now properly preserves comments, being
based on <code class="docutils literal notranslate"><span class="pre">ruamel.yaml</span></code>.</p></li>
<li><p>Nuitka-Python: Added support for the Linux build with Nuitka-Python
for our own CPython fork as well, previously only Windows was
working, amd macOS will follow later.</p></li>
<li><p>The commit hook when installed from git bash was working, but doing
so from <code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> didn&#8217;t find a proper path for shell from the
<code class="docutils literal notranslate"><span class="pre">git</span></code> location.</p></li>
<li><p>Debugging: A lot of experimental toggles were added, that allow
control over the use of certain optimization, e.g. use of dict, list,
iterators, subscripts, etc. internals, to aid in debugging in
situations where it&#8217;s not clear, if these are causing the issue or
not.</p></li>
<li><p>Added support for Fedora 36, which requires some specific linker
options, also recognize Fedora based distributions as such.</p></li>
<li><p>Removed long deprecated option <code class="docutils literal notranslate"><span class="pre">--noinclude-matplotlib</span></code> from numpy
plugin, as it hasn&#8217;t had an effect for a long time now.</p></li>
<li><p>Visual Code: Added extension for editing Jinja2 templates. This one
even detects that we are editing C or Python and properly highlights
accordingly.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this heading">&#61633;</a></h2>
<ul class="simple">
<li><p>Standalone: Major cleanup of the dependency analysis for standalone.
There is no longer a distinction between entry points (main binary,
extension modules) and DLLs that they depend on. The OS specific
parts got broken out into dedicated modules as well and decisions are
now taken immediately.</p></li>
<li><p>Plugins: Split the Yaml package configuration files into 3 files. One
contains now Python2 only stdlib configuration, and another one
general stdlib.</p></li>
<li><p>Plugins: Also cleanup the <code class="docutils literal notranslate"><span class="pre">zmq</span></code> plugin, which was one the last
holdouts of now removed plugin method, moving parts to the Yaml
configuration. We therefore no longer have <code class="docutils literal notranslate"><span class="pre">considerExtraDlls</span></code>
which used to work on the standalone folder, but instead only plugin
code that provides included DLL or binary objects from
<code class="docutils literal notranslate"><span class="pre">getExtraDlls</span></code> which gives Nuitka much needed control over DLL
copying. This was a long lasting battle finally won, and will allow
many new features to come.</p></li>
<li><p>UI: Avoid changing whitespace in warnings, where we have intended
line breaks, e.g. in case of duplicate DLLs. Went over all warnings
and made sure to either avoid new-lines or have them, depending on
wanted output.</p></li>
<li><p>Iterator end check code now uses the same code as rich comparison
expressions and can benefit from optimization being done there as
well.</p></li>
<li><p>Solved TODO item about code generation time C types to specify if
they have error checking or not, rather than hard coding it.</p></li>
<li><p>Production of binary helper function set was cleaned up massively,
but still needs more work, comparison helper function set was also
redesigned.</p></li>
<li><p>Changing the spelling of our container package to become more clear.</p></li>
<li><p>Used <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> objects for storing used DLL information for more
clear code.</p></li>
<li><p>Added spellchecker ignores for all attribute and argument names of
generated fixed attribute nodes.</p></li>
<li><p>In auto-format make sure the imports float to the top. That very much
cleans up generated attribute nodes code, allowing also to combine
the many ones it makes, but also cleans up some of our existing code.</p></li>
<li><p>The package configuration Yaml files are now sorted according to
module names. This will help to avoid merge conflicts during hotfixes
merge back to develop and automatically group related entries in a
sane way.</p></li>
<li><p>Moved large amounts of code producing implicit imports to Yaml
configuration files.</p></li>
<li><p>Changed the <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> plugin to Yaml based configuration, making
it a deprecated do nothing plugin, that only remains there for a few
releases, to not crash existing build scripts.</p></li>
<li><p>Lots of spelling cleanups, e.g. renaming <code class="docutils literal notranslate"><span class="pre">nuitka.codegen</span></code> to
<code class="docutils literal notranslate"><span class="pre">nuitka.code_generation</span></code> for clarity.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this heading">&#61633;</a></h2>
<ul class="simple">
<li><p>Added generated test to cover <code class="docutils literal notranslate"><span class="pre">bytes</span></code> method. This would have found
the issue with <code class="docutils literal notranslate"><span class="pre">decode</span></code> potentially.</p></li>
<li><p>Enhanced standalone test for <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> on Linux to actually have
something to test.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">&#61633;</a></h2>
<p>This release improves on many things at once. A lot of work has been put
into polishing the Yaml configuration that now only lacks documentation
and examples, such that the community as a whole should become capable
of adding missing dependencies, data files, DLLs, and even anti-bloat
patches.</p>
<p>Then a lot of new optimization has been done, to close the missing gaps
with <code class="docutils literal notranslate"><span class="pre">dict</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> methods, but before completing <code class="docutils literal notranslate"><span class="pre">list</span></code> which
is already a work in progress pull request, and <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, we want to
start and generate the node classes that form the link or basis of
dedicated nodes. This will be an area to work on more.</p>
<p>The many improvements to existing code helpers, and them being able to
pick target types for the arguments of comparisons and binary
operations, is a pre-cursor to universal optimization of this kind. What
is currently only done for constant values, will in the future be
interesting for picking specific C types for use. That will then be a
huge difference from what we are doing now, where most things still have
to use <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> based types.</p>
<p>Scalability has again seen very real improvements, memory usage of
Nuitka itself, as well as compile time inside Nuitka are down by a lot
for some cases, very noticeable. There is never enough of this, but it
appears, in many cases now, large compilations run much faster.</p>
<p>For macOS specifically, the new DLL dependency analysis, is much more
capable or resolving conflicts all by itself. Many of the more complex
packages with some variants of Python, specifically Anaconda will now be
working a lot better.</p>
<p>And then, of course there is the big improvement for Onefile, that
allows to use cached paths. This will make it more usable in the general
case, e.g. where the firewall of Windows hate binaries that change their
path each time they run.</p>
<p>Future directions will aim to make the compilation report more concise,
and given reasons and dependencies as they are known on the inside more
clearly, such that is can be a major tool for testing, bug reporting and
analysis of the compilation result.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     
    <a href="nuitka-release-09.html">
      <i class="fa fa-arrow-circle-left"></i> Nuitka Release 0.9
    </a>
    
  </span>
  <span>&#160;</span>
  <span style="float: right">
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class="share-button-container">
    <div class="socialbutton-wrapper">

        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-10.html&amp;hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter">
                <p class="icon">
                    <img src="/_static/icon-twitter.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-10.html&amp;hashtag=%23nuitka" target="_blank">
            <div class="socialbutton facebook">
                <p class="icon">
                    <img src="/_static/icon-facebook.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-10.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 switcher-container">
            <summary class="sd-summary-title sd-card-header switcher-title">EN<div class="sd-summary-down docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z">
                        </path>
                    </svg>
                </div>
                <div class="sd-summary-up docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z">
                        </path>
                    </svg>
                </div>
            </summary>
            <div class="sd-summary-content sd-card-body switcher-body docutils">
                <blockquote>
                    <div>
                        <div><div class="line"><a class="reference external" href="/zh_CN/posts/nuitka-release-10.html">CN</a></div>
                            <div class="line"><a class="reference external" href="/de_DE/posts/nuitka-release-10.html">DE</a></div>
                            </div></div>
                </blockquote>
            </div>
        </details>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  </body>
</html>