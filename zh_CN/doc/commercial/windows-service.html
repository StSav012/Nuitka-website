<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN">
<head>
  <meta charset="utf-8"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/">
    <link rel="icon" href="../../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Windows Services with Nuitka &#8212; Nuitka the Python Compiler  &#25991;&#26723;</title>
      <link rel="stylesheet" href="/_static/css/combined_ac220f112c61f4d548c2fb69e24cce15.css" type="text/css">
      <link rel="canonical" href="https://nuitka.net/doc/commercial/windows-service.html">
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script>var DOCUMENTATION_OPTIONS = {
    URL_ROOT: '../../',
    VERSION: '',
    LANGUAGE: 'None',
    COLLAPSE_INDEX: false,
    BUILDER: 'html',
    FILE_SUFFIX: '.html',
    LINK_SUFFIX: '.html',
    HAS_SOURCE: false,
    SOURCELINK_SUFFIX: '.txt',
    NAVIGATION_WITH_KEYS: false,
    SHOW_SEARCH_SUMMARY: true,
    ENABLE_SEARCH_SHORTCUTS: true,
};</script>
        <script src="/_static/combined_9d0826dfcf5ca364c4baefd34061e656.js" async=""></script>
        <script src="../../_static/clipboard.min.js" async=""></script>
        <script src="../../_static/copybutton.js" async=""></script>
        <script src="../../_static/translations.js" async=""></script>
        <link rel="index" title="&#32034;&#24341;" href="../../genindex.html">
    <link rel="alternate" type="application/atom+xml" href="../../blog/atom.xml" title="Nuitka Blog">
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <div class="logo_container"><img src="../../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo" width="208" height="209">
          </div></a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">&#24555;&#36895;&#20837;&#38376;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commercial.html">Nuitka Commercial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/index.html">Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../more.html">&#26356;&#22810;&#20869;&#23481;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../blog.html">Nuitka &#21338;&#23458;</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <dl class="field-list simple">
<dt class="field-odd">orphan</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<section id="windows-services-with-nuitka">
<h1>Windows Services with Nuitka<a class="headerlink" href="#windows-services-with-nuitka" title="&#27704;&#20037;&#38142;&#25509;&#33267;&#26631;&#39064;">&#61633;</a></h1>
<p>In your code, you do not do anything special. If you have previously
used something like <code class="docutils literal notranslate"><span class="pre">win32service</span></code>, remove this. Nuitka handles all
interaction with the system for you.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Do your service work here as you would normally do it,</span>
        <span class="c1"># of course trying to not busy loop.</span>
        <span class="o">...</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="c1"># Service is being stopped, e.g. shutdown, manual</span>
    <span class="c1"># you have a little time for cleanups until getting hard killed.</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The plugin enables the creation of Windows Service executables, which
you can do manually like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sc.exe <span class="se">\\</span>myserver create NewService <span class="nv">binpath</span><span class="o">=</span> c:<span class="se">\s</span>ome_path<span class="se">\N</span>ewServ.exe
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">&#22791;&#27880;</p>
<p>The created binary also has a hidden parameter <code class="docutils literal notranslate"><span class="pre">install</span></code> that will
delete the existing service (for updates) and create it automatically
with the binary path set correctly, and therefore it will be
relatively easy. Extra arguments passed after install become
arguments passed to the service at run time.</p>
<p>Every other configuration of the service could be added, but it would
take work and somebody to fund my time this. For now, this is mainly
intended for simple use cases and internal automatic testing of the
plugin.</p>
</div>
<div class="admonition note">
<p class="admonition-title">&#22791;&#27880;</p>
<p>There are options to force the output of the service to standard
output and standard error into specified files. For debugging, you
can specify e.g. <code class="docutils literal notranslate"><span class="pre">--windows-force-stdout-spec='%PROGRAM%.out.txt'</span></code>
and <code class="docutils literal notranslate"><span class="pre">--windows-force-stderr-spec='%PROGRAM%.err.txt'</span></code>. Refer to the
User Manual of Nuitka for allowed special monikers. Of course,
absolute paths are allowed too.</p>
</div>
<p>The plugin is enabled with <code class="docutils literal notranslate"><span class="pre">--enable-plugin=windows-service</span></code> and has a
required parameter <code class="docutils literal notranslate"><span class="pre">--windows-service-name</span></code> which will be used as the
service name.</p>
<p>Combine this with <code class="docutils literal notranslate"><span class="pre">--windows-company-name</span></code> and ideally all related
options to provide a proper version resource.</p>
<div class="admonition note">
<p class="admonition-title">&#22791;&#27880;</p>
<p>The created binary does not run directly anymore, but <em>only</em> when
launched as a Windows service.</p>
</div>
<p>Go <a class="reference external" href="/doc/commercial.html#special-needs-commercial-only-use-cases">back to Nuitka commercial</a>
overview to learn about more features or to subscribe to <a class="reference external" href="/doc/commercial.html#pricing">Nuitka
commercial</a>.</p>
</section>

<div class="section">
   
</div>

           </div>
          </div>
          <footer>

  <hr>

  <div role="contentinfo">
    <p>&#169; &#29256;&#26435;&#25152;&#26377; 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class="share-button-container">
    <div class="socialbutton-wrapper">

        <a href="https://twitter.com/share?url=https://nuitka.net/doc/commercial/windows-service.html&amp;hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter">
                <p class="icon">
                    <img src="/_static/icon-twitter.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/doc/commercial/windows-service.html&amp;hashtag=%23nuitka" target="_blank">
            <div class="socialbutton facebook">
                <p class="icon">
                    <img src="/_static/icon-facebook.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/doc/commercial/windows-service.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 switcher-container">
            <summary class="sd-summary-title sd-card-header switcher-title">CN<div class="sd-summary-down docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z">
                        </path>
                    </svg>
                </div>
                <div class="sd-summary-up docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z">
                        </path>
                    </svg>
                </div>
            </summary>
            <div class="sd-summary-content sd-card-body switcher-body docutils">
                <blockquote>
                    <div>
                        <div><div class="line"><a class="reference external" href="/doc/commercial/windows-service.html">EN</a></div>
                            <div class="line"><a class="reference external" href="/de_DE/doc/commercial/windows-service.html">DE</a></div>
                            </div></div>
                </blockquote>
            </div>
        </details>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  </body>
</html>